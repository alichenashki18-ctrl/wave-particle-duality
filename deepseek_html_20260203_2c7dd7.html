<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¢Ø²Ù…Ø§ÛŒØ´ Ø¯Ùˆ Ø´Ú©Ø§Ù - Ø¯ÙˆÚ¯Ø§Ù†Ú¯ÛŒ Ù…ÙˆØ¬-Ø°Ø±Ù‡</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0a0f2e 0%, #1a1f3e 100%);
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 900px;
            width: 100%;
            text-align: center;
            padding: 20px;
        }
        
        .header {
            margin-bottom: 30px;
            border-bottom: 2px solid rgba(0, 255, 255, 0.3);
            padding-bottom: 15px;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00ffff, #00ccff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #a0d2ff;
            margin-bottom: 5px;
        }
        
        .experiment-container {
            position: relative;
            margin: 0 auto 40px;
            border: 3px solid rgba(0, 150, 255, 0.3);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 0 40px rgba(0, 100, 255, 0.2);
            background: rgba(5, 10, 30, 0.7);
        }
        
        #p5-canvas {
            display: block;
            margin: 0 auto;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn-wave {
            background: linear-gradient(90deg, #0066ff, #00ccff);
            color: white;
            box-shadow: 0 5px 20px rgba(0, 102, 255, 0.4);
        }
        
        .btn-particle {
            background: linear-gradient(90deg, #ffaa00, #ffdd00);
            color: #222;
            box-shadow: 0 5px 20px rgba(255, 170, 0, 0.4);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 100, 255, 0.6);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .btn-wave.active {
            background: linear-gradient(90deg, #00ccff, #00ffff);
            box-shadow: 0 0 25px rgba(0, 255, 255, 0.8);
        }
        
        .btn-particle.active {
            background: linear-gradient(90deg, #ffdd00, #ffff00);
            box-shadow: 0 0 25px rgba(255, 255, 0, 0.8);
        }
        
        .explanation {
            background: rgba(20, 30, 60, 0.8);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            border-left: 5px solid #00ccff;
            text-align: right;
            line-height: 1.8;
        }
        
        .explanation h3 {
            color: #00ffff;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        
        .mode-explanation {
            font-size: 1.1rem;
            color: #c0e0ff;
            min-height: 120px;
        }
        
        .footer {
            margin-top: 30px;
            color: #6688aa;
            font-size: 0.9rem;
            text-align: center;
            padding-top: 15px;
            border-top: 1px solid rgba(100, 150, 255, 0.2);
        }
        
        .icon {
            font-size: 1.5rem;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .btn {
                padding: 10px 20px;
                min-width: 160px;
                font-size: 1rem;
            }
            
            .explanation {
                padding: 15px;
            }
        }
        
        /* Glow effects */
        .glow {
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from {
                box-shadow: 0 0 10px rgba(0, 200, 255, 0.5);
            }
            to {
                box-shadow: 0 0 20px rgba(0, 255, 255, 0.8), 0 0 30px rgba(0, 150, 255, 0.6);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="glow">Ø¢Ø²Ù…Ø§ÛŒØ´ Ø¯Ùˆ Ø´Ú©Ø§Ù ÛŒØ§Ù†Ú¯</h1>
            <div class="subtitle">Ù†Ù…Ø§ÛŒØ´ Ø¯ÙˆÚ¯Ø§Ù†Ú¯ÛŒ Ù…ÙˆØ¬-Ø°Ø±Ù‡ Ø¯Ø± Ù…Ú©Ø§Ù†ÛŒÚ© Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ</div>
        </div>
        
        <div class="experiment-container">
            <div id="p5-container"></div>
        </div>
        
        <div class="controls">
            <button id="wave-btn" class="btn btn-wave active">
                <span class="icon">ğŸŒŠ</span>
                Ø­Ø§Ù„Øª Ù…ÙˆØ¬ÛŒ (Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø§Ù‡Ø¯Ù‡)
            </button>
            <button id="particle-btn" class="btn btn-particle">
                <span class="icon">ğŸ”</span>
                Ø­Ø§Ù„Øª Ø°Ø±Ù‡â€ŒØ§ÛŒ (Ø¨Ø§ Ù…Ø´Ø§Ù‡Ø¯Ù‡)
            </button>
        </div>
        
        <div class="explanation">
            <h3>ØªÙØ³ÛŒØ± Ø­Ø§Ù„Øª ÙØ¹Ù„ÛŒ:</h3>
            <div id="explanation-text" class="mode-explanation">
                <p><strong>Ø­Ø§Ù„Øª Ù…ÙˆØ¬ÛŒ:</strong> Ø¯Ø± Ø§ÛŒÙ† Ø­Ø§Ù„ØªØŒ Ø³ÛŒØ³ØªÙ… ØªØ­Øª Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‚Ø±Ø§Ø± Ù†Ø¯Ø§Ø±Ø¯. ØªØ§Ø¨Ø¹ Ù…ÙˆØ¬ Ø§Ù„Ú©ØªØ±ÙˆÙ† Ø§Ø² Ù‡Ø± Ø¯Ùˆ Ø´Ú©Ø§Ù Ø¹Ø¨ÙˆØ± Ú©Ø±Ø¯Ù‡ Ùˆ Ø¨Ø§ Ø®ÙˆØ¯Ø´ ØªØ¯Ø§Ø®Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ù†ØªÛŒØ¬Ù‡ ØªØ´Ú©ÛŒÙ„ Ø§Ù„Ú¯ÙˆÛŒ ØªØ¯Ø§Ø®Ù„ÛŒ (Ù†ÙˆØ§Ø±Ù‡Ø§ÛŒ Ø±ÙˆØ´Ù† Ùˆ ØªØ§Ø±ÛŒÚ©) Ø±ÙˆÛŒ ØµÙØ­Ù‡ Ø§Ø³Øª Ú©Ù‡ Ø®Ø§ØµÛŒØª Ù…ÙˆØ¬ÛŒ Ø°Ø±Ø§Øª Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ Ø±Ø§ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.</p>
            </div>
        </div>
        
        <div class="footer">
            <p>Ø§Ø±Ø§Ø¦Ù‡â€ŒØ´Ø¯Ù‡ Ø¯Ø± Ú©Ø§Ø±Ú¯Ø§Ù‡ Ù…Ú©Ø§Ù†ÛŒÚ© Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ | Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø¨Ø§ p5.js</p>
            <p>Ø¨Ø±Ø§ÛŒ ØªØºÛŒÛŒØ± Ø­Ø§Ù„Øª Ø¢Ø²Ù…Ø§ÛŒØ´ØŒ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯ ÛŒØ§ Ø±ÙˆÛŒ ØµÙØ­Ù‡ Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ú©Ù„ÛŒÚ© Ù†Ù…Ø§ÛŒÛŒØ¯.</p>
        </div>
    </div>

    <!-- p5.js Library (Local Fallback) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    
    <script>
        // p5.js Sketch
        let mode = 'wave';
        let impacts = [];
        let particles = [];
        let canvas;

        function setup() {
            const container = document.getElementById('p5-container');
            canvas = createCanvas(800, 500);
            canvas.parent('p5-container');
            pixelDensity(1);
        }

        function draw() {
            background(5, 10, 20);
            
            // Draw Source Emitter
            drawEmitter();
            
            // Draw the Slits with a slight glow
            drawBarriers();

            if (mode === 'wave') {
                drawWaveInterference();
                drawFringes();
            } else {
                drawParticlePhysics();
                drawObserverEye();
            }
        }

        function drawEmitter() {
            fill(30, 40, 60);
            rect(0, 210, 60, 80, 5);
            fill(100, 200, 255);
            ellipse(60, 250, 10, 30);
        }

        function drawBarriers() {
            push();
            fill(150, 160, 180);
            drawingContext.shadowBlur = 15;
            drawingContext.shadowColor = 'rgba(0,0,0,0.5)';
            rect(300, 0, 10, 190);
            rect(300, 215, 10, 70);
            rect(300, 310, 10, 190);
            pop();
        }

        function drawWaveInterference() {
            push();
            noFill();
            for (let r = 0; r < 500; r += 30) {
                let fade = map(r, 0, 500, 255, 0);
                stroke(0, 255, 255, fade * 0.6);
                strokeWeight(2);
                drawingContext.shadowBlur = 10;
                drawingContext.shadowColor = 'cyan';
                
                let w = (r + frameCount * 2) % 500;
                arc(310, 202, w, w, -HALF_PI, HALF_PI);
                arc(310, 297, w, w, -HALF_PI, HALF_PI);
            }
            pop();
        }

        function drawFringes() {
            for(let i = 0; i < height; i++) {
                let intensity = pow(cos(i * 0.06), 2); 
                stroke(0, 255, 255, intensity * 150);
                line(770, i, 790, i);
            }
        }

        function drawParticlePhysics() {
            if (frameCount % 3 === 0) {
                particles.push({x: 60, y: 250, vx: 7, vy: random(-1.5, 1.5)});
            }

            for (let i = particles.length - 1; i >= 0; i--) {
                let p = particles[i];
                p.x += p.vx;
                p.y += p.vy;

                if (p.x > 300 && p.x < 315) {
                    if (p.y < 190 || (p.y > 205 && p.y < 295) || p.y > 310) {
                        particles.splice(i, 1);
                        continue;
                    }
                }

                if (p.x >= 770) {
                    impacts.push(p.y);
                    particles.splice(i, 1);
                }

                fill(255, 255, 100);
                drawingContext.shadowBlur = 8;
                drawingContext.shadowColor = 'yellow';
                ellipse(p.x, p.y, 5, 5);
            }

            for (let y of impacts) {
                stroke(255, 200, 0, 100);
                line(770, y, 785, y);
            }
        }

        function drawObserverEye() {
            push();
            translate(305, 100);
            fill(255);
            ellipse(0, 0, 30, 15);
            fill(0);
            ellipse(0, 0, 10, 10);
            pop();
        }

        // UI Control Functions
        function setMode(newMode) {
            mode = newMode;
            particles = [];
            impacts = [];
            
            // Update button states
            if (newMode === 'wave') {
                document.getElementById('wave-btn').classList.add('active');
                document.getElementById('particle-btn').classList.remove('active');
                document.getElementById('explanation-text').innerHTML = `
                    <p><strong>Ø­Ø§Ù„Øª Ù…ÙˆØ¬ÛŒ:</strong> Ø¯Ø± Ø§ÛŒÙ† Ø­Ø§Ù„ØªØŒ Ø³ÛŒØ³ØªÙ… ØªØ­Øª Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‚Ø±Ø§Ø± Ù†Ø¯Ø§Ø±Ø¯. ØªØ§Ø¨Ø¹ Ù…ÙˆØ¬ Ø§Ù„Ú©ØªØ±ÙˆÙ† Ø§Ø² Ù‡Ø± Ø¯Ùˆ Ø´Ú©Ø§Ù Ø¹Ø¨ÙˆØ± Ú©Ø±Ø¯Ù‡ Ùˆ Ø¨Ø§ Ø®ÙˆØ¯Ø´ ØªØ¯Ø§Ø®Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ù†ØªÛŒØ¬Ù‡ ØªØ´Ú©ÛŒÙ„ Ø§Ù„Ú¯ÙˆÛŒ ØªØ¯Ø§Ø®Ù„ÛŒ (Ù†ÙˆØ§Ø±Ù‡Ø§ÛŒ Ø±ÙˆØ´Ù† Ùˆ ØªØ§Ø±ÛŒÚ©) Ø±ÙˆÛŒ ØµÙØ­Ù‡ Ø§Ø³Øª Ú©Ù‡ Ø®Ø§ØµÛŒØª Ù…ÙˆØ¬ÛŒ Ø°Ø±Ø§Øª Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ Ø±Ø§ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.</p>
                    <p>Ø°Ø±Ø§Øª Ø¯Ø± Ø­Ø§Ù„Øª Ø¨Ø±Ù‡Ù…â€ŒÙ†Ù‡ÛŒ Ú©ÙˆØ§Ù†ØªÙˆÙ…ÛŒ Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±Ù†Ø¯: |ÏˆâŸ© = |Ø´Ú©Ø§Ù Ú†Ù¾âŸ© + |Ø´Ú©Ø§Ù Ø±Ø§Ø³ØªâŸ©</p>
                `;
            } else {
                document.getElementById('particle-btn').classList.add('active');
                document.getElementById('wave-btn').classList.remove('active');
                document.getElementById('explanation-text').innerHTML = `
                    <p><strong>Ø­Ø§Ù„Øª Ø°Ø±Ù‡â€ŒØ§ÛŒ:</strong> Ø¯Ø± Ø§ÛŒÙ† Ø­Ø§Ù„ØªØŒ Ø³ÛŒØ³ØªÙ… ØªØ­Øª Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±Ø¯ (Ú†Ø´Ù… Ù†Ù…Ø§ÛŒØ§Ù†Ú¯Ø± Ø¢Ø´Ú©Ø§Ø±Ø³Ø§Ø² Ø§Ø³Øª). Ø¹Ù…Ù„ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ø¨Ø§Ø¹Ø« ÙØ±ÙˆÙ¾Ø§Ø´ÛŒ ØªØ§Ø¨Ø¹ Ù…ÙˆØ¬ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø§Ù„Ú©ØªØ±ÙˆÙ† Ù…Ø¬Ø¨ÙˆØ± Ø§Ø³Øª Ø§Ø² ÛŒÚ©ÛŒ Ø§Ø² Ø´Ú©Ø§Ùâ€ŒÙ‡Ø§ Ø¹Ø¨ÙˆØ± Ú©Ù†Ø¯ Ùˆ Ù…Ø§Ù†Ù†Ø¯ ÛŒÚ© Ø°Ø±Ù‡Ù” Ú©Ù„Ø§Ø³ÛŒÚ© Ø±ÙØªØ§Ø± Ù†Ù…Ø§ÛŒØ¯.</p>
                    <p>Ø§Ù„Ú¯ÙˆÛŒ ØªØ¯Ø§Ø®Ù„ÛŒ Ù†Ø§Ù¾Ø¯ÛŒØ¯ Ø´Ø¯Ù‡ Ùˆ Ø¯Ùˆ Ù†ÙˆØ§Ø± Ù…Ø¬Ø²Ø§ ØªØ´Ú©ÛŒÙ„ Ù…ÛŒâ€ŒØ´ÙˆØ¯: P(x) = |Ïˆâ‚|Â² + |Ïˆâ‚‚|Â²</p>
                `;
            }
        }

        // Mouse and Click Events
        function mousePressed() {
            if (mouseX > 0 && mouseX < width && mouseY > 0 && mouseY < height) {
                setMode(mode === 'wave' ? 'particle' : 'wave');
            }
        }

        // Initialize UI Controls
        document.getElementById('wave-btn').addEventListener('click', () => setMode('wave'));
        document.getElementById('particle-btn').addEventListener('click', () => setMode('particle'));
    </script>
</body>
</html>